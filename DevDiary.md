# ✍🏻Heima DianPing

## 黑马点评项目

#### 🤔DAY 1

#### 1. 复习Redis基本数据类型和相关操作

#### 2. 完成项目开发环境搭建

---

#### 🧐DAY 2

#### 1. 完成登录模块功能

#### 2. 学习使用Redis替代Session实现用户登陆来解决集群之间Session不能共享的问题

---

#### 🙁DAY 3

#### 1. 了解Redis作为缓存的用法 并对查询和更新商铺信息相关代码进行优化

#### 2. 学习了引入缓存后的数据一致性问题

#### 3. 学习了缓存穿透的原因和两种解决方案：缓存空对象和布隆过滤法。并使用空对象法对代码进行优化

#### 4. 学习了缓存雪崩的原因和相关的解决方法

#### 5. 学习了缓存击穿的原因和两种解决方案。互斥锁和逻辑过期法。并分别使用两种方法对代码进行优化

#### 6. 学习了了JMeter测试工具的使用，测试了之前优化的代码在高并发环境下的性能表现。

---

#### 🙁DAY 4

#### 1.封装昨天做的所有的Redis操作成一个工具类，使用函数式编程和泛型使工具类可以作用于任意类型的对象。

#### 2.如何利用Redis解决集群模式下Session共享的问题。如何使用Redis给热点数据添加缓存，并且去应对缓存使用时出现的缓存穿透，缓存雪崩和缓存击穿等问题。

---

#### 🧐DAY 5

#### 1.学习了在秒杀活动中存在的线程安全问题。复习了悲观锁和乐观锁两种锁机制

#### 2.使用CAS方法解决了在秒杀活动中的超卖问题

#### 3.使用同步代码块实现了一人一单的问题

#### 4.在解决一人一单的问题中碰到了Spring事务失效的问题。原因是使用了this关键字调用了本类中一个标有@transactional的方法

#### 因为Spring实现事务的方式是使用了代理类来实现的，因此通过this调用标有@transactional的方法事务并不会生效。因此通过

#### AopContext.currentProxy()方法获取当前类的代理类对象，通过代理类对象调用标有@transactional的方法来解决事务失效的问题

#### 5.了解了在集群状态下使用同步代码块失效的情况

---

#### 🧐DAY 6

#### 1.使用Redis的Setnx命令实现分布式锁

#### 2，在实践过程中发现仅仅通过setnx命令实现分布式锁可能存在误删的问题，也就是一个线程删除掉了不属于他的锁。因此修改锁的标识，引入UUID+线程ID。在释放锁的时候判断这个锁是不是当前线程的锁，来解决误删问题

#### 3.为了解决误删为题，需要在unlock方法中先判断，再删除，但是这两个步骤不是原子性的，也会有线程安全问题。因此引入了Lua脚本来保证原子性。

#### 4.目前实现的锁是不可重入的，因为在判断的时候是通过setnx命令，只有第一次执行的时候才会返回true。结合Java中ReentrantLock锁的原理，改进自己实现的分布式锁，

#### 使用哈希结构，存储UUID+threadID为field,value为访问次数计数器实现。为了保证原子性，采用了Lua脚本语言实现。

#### 5.了解了Redisson分布式锁框架的简单实用

---

#### 🧐DAY 7

#### 1.为提高系统的并发性，将之前的秒杀业务改造成异步执行，配合阻塞队列大幅提高系统的并发性

#### 2.了解Redis中的List，PubSub消息队列和最新的Stream消息队列以及各自的优缺点。

#### 3.将阻塞队列替换成Redis中的Stream消息队列

---

#### 🧐DAY 8

#### 1.使用redis中的set完成一人只能点赞一次的功能

#### 2.使用redis中的zset完成点赞头像顺序按照点赞时间排列的功能

#### 3.使用redis中的set的交集功能完成共同好友功能

#### 4.了解Feed流的三种实现方式，推，拉，推拉结合的方式。实现了基于redis和推模式的feed流推送功能，实现用户可以查看自己关注的博主发送的笔记的功能

#### 5.利用redis中的geo数据结构实现根据距离显示商家的功能

---

#### 🧐DAY 9

#### 1.利用BitMap数据结构实现用户签到功能

# 完结
